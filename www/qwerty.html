<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>dialog demo</title>
        <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.0/themes/base/jquery-ui.css">
        <script src="http://code.jquery.com/jquery-1.8.2.js"></script>
        <script src="http://code.jquery.com/ui/1.9.0/jquery-ui.js"></script>
    </head>
    <body>

        <div id="setsendial" title="Dialog Title" style="background-image: url('img/shareit.png'); width:138px; height: 100px;">
            <div id="setsendial_div1" style="padding-top: 20px;" align="center">
                Аудитория <br/> <input id="setsendial_input" value="" type="text" maxlength="5" style="width:40px;"/> 
            </div>
            <div id="setsendial_div2" align="center">
                <button value="ok" onclick="set_settings_sensor_ok()">ok</button>
                <button value="cancel" onclick="set_settings_sensor_cancel()">cancel</button>
            </div>
        </div>

        <div align="center">  <button onclick="setsendial_open(event);">open the dialog</button> 
        </div>
        <div align="center">  <button onclick="setsendial_open(event);">open the dialog</button> 
        </div>
        <script>
            
            function setsendial_open(event) {
                $( "#setsendial" ).hide();
                var setap=document.getElementById("setsendial");
                setap.style.position="relative";
                setap.style.left=parseInt(event.pageX-69)+"px";
                setap.style.top=parseInt(event.pageY+10)+"px"
                event.stopPropagation();
                $(document).click(function(e){
                    var targetElementId = e.target.id;
                    if ((targetElementId==null) || (targetElementId=="")){
                        $(document).unbind('click', arguments.callee);
                        $( "#setsendial" ).hide();
                        return;
                    }
                    var parent=document.getElementById(targetElementId).parentNode;
                    var idtargetparent=parent.parentNode.id;
                    var indent='setsendial';
                    if ((targetElementId==indent) || (idtargetparent==indent) || (parent.id==indent))//TODO
                    {
                        return;                   
                    }else{                       
                        $(document).unbind('click', arguments.callee);
                        $( "#setsendial" ).hide(); 
                    }
                }
            );
                $( "#setsendial" ).show();
            }           

     
         /*   function  set_settings_sensor_cancel(){
                $( "#setsendial" ).hide();
                $(document).unbind('click', arguments.callee);                    
            }
          */  
            function  set_settings_sensor_ok(){
                $( "#setsendial" ).hide();
                $(document).unbind('click', arguments.callee);                    
            }
            
            $( "#setsendial" ).hide();
            
        </script>

    </body>
</html>